<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MARS</title>
    <script type="text/javascript" src="./jtopo-0.4.8-min.js"></script>
</head>
<body ng-app="marsApp">
<canvas width="800" height="800" id="canvas" style="background-color: white"></canvas>
</body>
<script type="text/javascript">


  var canvas = document.getElementById('canvas');


  var context = canvas.getContext('2d');
  // 设置文字阴影的颜色为黑色，透明度为20%
  context.shadowColor = 'rgba(0, 0, 0, 0.5)';
  // 将阴影向右移动15px，向上移动10px
  context.shadowOffsetX = 2;
  context.shadowOffsetY = 2;
  // 轻微模糊阴影
  context.shadowBlur = 2;
//  context.opacity = 1;
  context.globalAlpha = 1;

  var stage = new JTopo.Stage(canvas); // 创建一个舞台对象
  stage.removeAllEventListener();
  stage.mode = 'edit';
  stage.mousedrag(function (a) {
    console.log(a)
  })

  var scene = new JTopo.Scene(stage); // 创建一个场景对象
  scene.removeAllEventListener();

  let node111 = new JTopo.Node();
  node111.percent = 0.1;
  node111.beginDegree = 0;
  node111.width = 20;
  node111.height = 80;
  node111.setLocation(400, 210);
//  node111.shadowOffsetX = 5;
//  node111.shadowOffsetY = 15;
//  node111.shadowColor = '0,255,0';
//  node111.shadowBlur = 5;

  scene.add(node111);
////  node1.showSelected = false;
//  node1.paint = function(g){
//    g.beginPath();
//    g.rect(-10,-40,20, 80);
//    g.fillStyle = 'rgba(255,255,255,' + this.alpha + ')';
//    g.fill();
//    g.closePath();
//    g.save();
//
////    g.moveTo(-10,-40);
////    g.fillStyle = 'rgba(0,255,0,' + this.alpha + ')';
////    g.lineTo(20,0);
////    g.lineTo(20,80);
////    g.lineTo(0, 80);
////    g.lineTo(0,0);
////    g.fill();
////    g.closePath();
//
//    // g.save();
//    // g.beginPath();
//    // g.fillStyle = 'rgba(255,255,0,' + this.alpha + ')';
//    // g.moveTo(0,0);
//    // g.arc(0, 0, this.width/2-10, this.beginDegree, this.beginDegree + 2*Math.PI);
//    // g.fill();
////    g.closePath();
//    g.restore();
//
//    this.paintText(g);
//  };
//  scene.add(node1); // 放入到场景中

  var flowLayout = JTopo.layout.FlowLayout(210, 210);



 /* var container2 = new JTopo.Container('边界bu变化');

  container2.layout = flowLayout;
  container2.fillColor = '10,10,100';
  container2.setBound(0, 0, 500, 300);
  scene.add(container2);
  container2.add(node1);
  container2.dragable = false;
*/


  var container = new JTopo.Container('边界自动变化');
//  container.setBound(0, 0, 500, 300);
  container.textPosition = 'Middle_Center';
  container.fontColor = '100,255,0';
  container.font = '18pt 微软雅黑';
  container.borderColor = '255,0,0';
  container.fillColor = '255,0,255';
  container.borderRadius = 0; // 圆角
  container.dragable = false;
  scene.add(container);
//  container.add(node1);
  container.width = 300;
  container.height = 300;
  console.log(container.layout);

//  container.layout = flowLayout;

  let node1 = new JTopo.Node();
  node1.percent = 0.1;
  node1.beginDegree = 0;
  node1.width = 11;
  node1.height = 80;
  node1.setLocation(0,0);
  container.add(node1);
  scene.add(node1);
  node1.dragable = true;

  let node2 = new JTopo.Node();
  node2.percent = 0.1;
  node2.beginDegree = 0;
  node2.width = 11;
  node2.height = 80;
  node2.dragable = false ;
  node2.showSelected =false;

  node2.setLocation(1400,0);
  container.add(node2);
  scene.add(node2);
  container.showSelected = false;
  container.heigth = 80;




  var container1 = new JTopo.Container('边界自动变化');
    container.setBound(0, 0, 500, 300);
  container1.textPosition = 'Middle_Center';
  container1.borderColor = '255,0,0';
  container1.fillColor = '255,255,255';
  container1.borderRadius = 0; // 圆角
  container1.alpha = 1;
  container1.dragable = false;
  scene.add(container1);
  //  container.add(node1);
  container1.width = 300;
  container1.heigth = 300;

  let node11 = new JTopo.Node();
  node11.percent = 0.1;
  node11.beginDegree = 0;
  node11.width = 1;
  node11.height = 80;
  node11.setLocation(0,80);
  container1.add(node11);
  scene.add(node11);
  node11.dragable = false;

  let node21 = new JTopo.Node();
  node21.percent = 0.1;
  node21.beginDegree = 0;
  node21.width = 1;
  node21.height = 80;
  node21.dragable = false;
  node21.showSelected =false;

  node21.setLocation(1400,80);
  container1.add(node21);
  container1.showSelected = false;
  scene.add(node21);
  scene.dragable = false;
  stage.dragable = false;


  stage.saveAsLocalImage();



//  for(var i=0; i<5; i++){
//    var node = new JTopo.Node("A_"+i);
//    node.textPosition = "Middle_Center";
//    node.setLocation(300+ Math.random() * 300, 200+ Math.random() * 200);
//    scene.add(node);
//    container.add(node);
//  }

/**/
  /*var container3 = new JTopo.Container('边界自动变化');
  container3.textPosition = 'Middle_Center';
  container3.fontColor = '100,255,0';
  container3.font = '18pt 微软雅黑';
  container3.borderColor = '255,0,0';
  container3.borderRadius = 30; // 圆角
  scene.add(container3);

  for(var i=0; i<5; i++){
    var node = new JTopo.Node("A_"+i);
    node.textPosition = "Middle_Center";
    node.setLocation(300+ Math.random() * 300, 200+ Math.random() * 200);
    scene.add(node);
    container3.add(node);
  }
  scene.add(new JTopo.Link(container.childs[0], container3.childs[1]));
  scene.add(new JTopo.Link(container.childs[2], container3.childs[3]));*/

  /*var node = new JTopo.Node("自定义");
  node.percent = 0.8;
  node.beginDegree = 0;
  node.width = node.height = 60;
  node.setLocation(400, 210);
  node.paint = function(g){
    g.beginPath();
    g.rect(-30,-30,60, 60);
    g.fillStyle = 'rgba(0,0,255,' + this.alpha + ')';
//    g.arc(0, 0, this.width/2, this.beginDegree, this.beginDegree + 2*Math.PI*this.percent);
//    g.fill();
//    g.closePath();
//
//    g.save();
//    g.beginPath();
//    g.fillStyle = 'rgba(255,255,0,' + this.alpha + ')';
//    g.moveTo(0,0);
//    g.arc(0, 0, this.width/2-10, this.beginDegree, this.beginDegree + 2*Math.PI);
    g.fill();
//    g.closePath();
//    g.restore();
    g.save();
    this.paintText(g);
  };
  scene.add(node);*/

</script>
</html>